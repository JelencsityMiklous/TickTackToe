<!DOCTYPE html>
<html lang="hu">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tic-Tac-Toe - Bel√©p√©s</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <img class="anakin-bg" src="/hatter/Anakin-skywalker-png-4.webp"alt="Anakin"/>
    <img class="vader-bg" src="/hatter/Star-Wars-Darth-Vader-PNG.png"alt="Darth Vader"/>
    <!-- ≈∞rhaj√≥k h√°tt√©rben -->
    <svg
      class="spaceship spaceship-1"
      width="80"
      height="40"
      viewBox="0 0 80 40"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M5 20 L25 15 L60 18 L75 20 L60 22 L25 25 L5 20Z"
        fill="#ccc"
        stroke="#fff"
        stroke-width="0.5"
      />
      <path d="M60 18 L70 20 L60 22 L60 18Z" fill="#fff" opacity="0.8" />
      <circle cx="30" cy="20" r="3" fill="#4af" opacity="0.6" />
      <circle cx="40" cy="20" r="2" fill="#4af" opacity="0.6" />
    </svg>

    <svg
      class="spaceship spaceship-2"
      width="100"
      height="50"
      viewBox="0 0 100 50"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M10 25 L30 20 L70 23 L90 25 L70 27 L30 30 L10 25Z"
        fill="#aaa"
        stroke="#fff"
        stroke-width="0.5"
      />
      <path d="M70 23 L85 25 L70 27 L70 23Z" fill="#fff" opacity="0.7" />
      <path d="M20 25 L30 22 L30 28 L20 25Z" fill="#ddd" opacity="0.5" />
      <circle cx="35" cy="25" r="2" fill="#f44" opacity="0.6" />
    </svg>

    <svg
      class="spaceship spaceship-3"
      width="60"
      height="30"
      viewBox="0 0 60 30"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M5 15 L20 12 L45 14 L55 15 L45 16 L20 18 L5 15Z"
        fill="#bbb"
        stroke="#fff"
        stroke-width="0.5"
      />
      <path d="M45 14 L52 15 L45 16 L45 14Z" fill="#fff" opacity="0.8" />
      <circle cx="25" cy="15" r="2" fill="#4f4" opacity="0.6" />
    </svg>

    <div class="container">
      <div class="lobby-card">
        <h1>üéÆ Tic-Tac-Toe</h1>
        <p class="subtitle">Val√≥s idej≈± j√°t√©k k√©t j√°t√©kos sz√°m√°ra</p>

        <form id="joinForm">
          <div class="form-group">
            <label for="playerName">J√°t√©kos n√©v:</label>
            <input
              type="text"
              id="playerName"
              name="playerName"
              placeholder="Add meg a neved (min. 3 karakter)"
              minlength="3"
              required
            />
          </div>

          <div class="form-group">
            <label for="roomCode">Szoba k√≥d:</label>
            <input
              type="text"
              id="roomCode"
              name="roomCode"
              placeholder="Pl: GAME123"
              required
            />
            <small>Ha a szoba nem l√©tezik, l√©trej√∂n.</small>
          </div>

          <button type="submit" class="btn btn-primary">Csatlakoz√°s</button>
        </form>

        <div
          id="errorDisplay"
          class="error-message"
          style="display: none"
        ></div>
      </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      const form = document.getElementById("joinForm");
      const errorDisplay = document.getElementById("errorDisplay");

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        const playerName = document.getElementById("playerName").value.trim();
        const roomCode = document
          .getElementById("roomCode")
          .value.trim()
          .toUpperCase();

        if (playerName.length < 3) {
          showError("A n√©v legal√°bb 3 karakter legyen!");
          return;
        }

        if (!roomCode) {
          showError("Add meg a szoba k√≥dj√°t!");
          return;
        }
        window.location.href = `/room/${roomCode}?name=${encodeURIComponent(playerName)}`;
      });

      function showError(message) {
        errorDisplay.textContent = message;
        errorDisplay.style.display = "block";
        setTimeout(() => {
          errorDisplay.style.display = "none";
        }, 3000);
      }
    </script>
  </body>
</html>
